function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.handleNavStatus()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.handleNavStatus=function(){var t=window.location.href,n=window.location.protocol+"//"+window.location.host,a=t.replace(n,"");$(".nav li").each(function(t,n){var e=$(n);if(e.children("a").attr("href")===a)return e.addClass("active"),!1})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=10;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='telephone']");t.click(function(){var t=e.val();t||messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){a.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='img_captcha']"),s=f.find("input[name='password1']"),i=f.find("input[name='password2']"),o=f.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=a.val(),u=s.val(),l=i.val(),h=o.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJoYW5kbGVOYXZTdGF0dXMiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZG9tYWluIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aCIsInJlcGxhY2UiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwibGkiLCJjaGlsZHJlbiIsImF0dHIiLCJhZGRDbGFzcyIsImxpc3RlblNob3dIaWRlRXZlbnQiLCJsaXN0ZW5Td2l0Y2hFdmVudCIsImxpc3RlblNpZ25pbkV2ZW50IiwibGlzdGVuSW1nQ2FwdGNoYUV2ZW50IiwibGlzdGVuU21zQ2FwdGNoYUV2ZW50IiwibGlzdGVuU2lnbnVwRXZlbnQiLCJzaG93RXZlbnQiLCJoaWRlRXZlbnQiLCJzbXNTdWNjZXNzRXZlbnQiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwic2lnbmluQnRuIiwic2lnbnVwQnRuIiwiY2xvc2VCdG4iLCJjbGljayIsImNzcyIsImxlZnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImltZ0NhcHRjaGEiLCJNYXRoIiwicmFuZG9tIiwidGVsZXBob25lSW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJzaG93SW5mbyIsInhmemFqYXgiLCJnZXQiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzaWduaW5Hcm91cCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsInJlbG9hZCIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBbUtBLFNBQVNBLGFBMkNULFNBQVNDLE9BQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsWUFBY0MsRUFBRSxpQkFDckJILEVBQUtJLGNBQWdCRCxFQUFFLG1CQUN2QkgsRUFBS0ssV0FBYUYsRUFBRSxvQkE1Q3hCTCxVQUFVUSxVQUFVQyxJQUFNLFdBQ1hOLEtBQ05PLHFCQURNUCxLQUVOUSxtQkFHVFgsVUFBVVEsVUFBVUUsbUJBQXFCLFdBQ3JDLElBQUlFLEVBQVVQLEVBQUUsYUFDWlEsRUFBY1IsRUFBRSxrQkFDcEJPLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDZCxXQUNFRixFQUFZRyxVQUlwQmhCLFVBQVVRLFVBQVVHLGdCQUFrQixXQUVsQyxJQUFJTSxFQUFNQyxPQUFPQyxTQUFTQyxLQUl0QkMsRUFIV0gsT0FBT0MsU0FBU0csU0FHUCxLQUZiSixPQUFPQyxTQUFTSSxLQUd2QkMsRUFBT1AsRUFBSVEsUUFBUUosRUFBTyxJQUNqQmhCLEVBQUUsV0FDUnFC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aUQsRUFBWSxJQUN4QkMsUUFBUSxPQUVFLE1BQWJELEdBQXNCQSxFQUFZLE9BQ3RDRSxNQUFRbkQsU0FBU2lELEVBQVksR0FBSyxJQUMzQkUsTUFBTSxPQUVJLE9BQWJGLEdBQXlCQSxFQUFZLFFBQ3pDRyxLQUFPcEQsU0FBU2lELEVBQVksR0FBSyxHQUFLLElBQy9CRyxLQUFPLE1BRUhQLEVBQUtRLGNBS0osSUFKQVIsRUFBS1MsV0FJSyxJQUhaVCxFQUFLVSxTQUdlLElBRm5CVixFQUFLVyxXQUV1QixJQUQxQlgsRUFBS1kiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1xyXG4vLyAvLyDnlKjmnaXlpITnkIblr7zoiKrmnaHnmoRcclxuLy8gZnVuY3Rpb24gRnJvbnRCYXNlKCkge31cclxuLy9cclxuLy9cclxuLy8gRnJvbnRCYXNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbi8vICAgICBzZWxmLmxpc3RlbkF1dGhCb3hIb3ZlcigpO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyBGcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIHZhciBhdXRoQm94ID0gJChcIi5hdXRoLWJveFwiKTtcclxuLy8gICAgIHZhciB1c2VyTW9yZUJveCA9ICQoXCIudXNlci1tb3JlLWJveFwiKTtcclxuLy8gICAgIGF1dGhCb3guaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgIHVzZXJNb3JlQm94LnNob3coKTtcclxuLy8gICAgIH0sZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKTtcclxuLy8gICAgIH0pO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyAkKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XHJcbi8vICAgICBmcm9udEJhc2UucnVuKCk7XHJcbi8vIH0pO1xyXG4vL1xyXG4vL1xyXG4vL1xyXG4vL1xyXG4vL1xyXG4vLyAvL+WkhOeQhueZu+W9lVxyXG4vLyBmdW5jdGlvbiBBdXRoKCl7XHJcbi8vICAgICB2YXIgc2VsZiA9IHRoaXNcclxuLy8gICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKFwiLm1hc2std3JhcHBlclwiKVxyXG4vLyAgICAgc2VsZi5zY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKVxyXG4vL1xyXG4vLyB9XHJcbi8vXHJcbi8vIEF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbi8vICAgICB2YXIgc2VsZiA9IHRoaXNcclxuLy8gICAgIHNlbGYubGlzdGVuU2hvd0hpZGVFdmVudCgpXHJcbi8vICAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KClcclxuLy8gICAgIHNlbGYubGlzdGVuU2lnbmluRXZlbnQoKVxyXG4vLyB9XHJcbi8vXHJcbi8vIC8vIOaYvuekulxyXG4vLyBBdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4vLyAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbi8vICAgICBzZWxmLm1hc2tXcmFwcGVyLnNob3coKVxyXG4vL1xyXG4vLyB9XHJcbi8vXHJcbi8vIC8vIOmakOiXj1xyXG4vLyBBdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4vLyAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbi8vICAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKVxyXG4vLyB9XHJcbi8vXHJcbi8vIC8v55uR5ZCs54K55Ye75LqL5Lu2XHJcbi8vIEF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4vLyAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4vLyAgICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XHJcbi8vICAgICB2YXIgc2lnbnVwQnRuID0gJCgnLnNpZ251cC1idG4nKTtcclxuLy8gICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuLy8gICAgIC8v55m75b2V5rOo5YaM5a+56K+d5qGGXHJcbi8vICAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuLy8gICAgICAgICBzZWxmLnNob3dFdmVudCgpXHJcbi8vICAgICAgICAgLy/kv67mlLljc3PmoLflvI/mmL7npLrkuLrnmbvlvZXlr7nor53moYZcclxuLy8gICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjogMH0pXHJcbi8vICAgICB9KVxyXG4vL1xyXG4vLyAgICAgc2lnbnVwQnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbi8vICAgICAgICAgc2VsZi5zaG93RXZlbnQoKVxyXG4vLyAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiAtNDAwfSlcclxuLy8gICAgIH0pXHJcbi8vXHJcbi8vICAgICAvLyDngrnlh7vlhbPpl63mjInpkq7pmpDol49cclxuLy8gICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbi8vICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKVxyXG4vLyAgICAgfSlcclxuLy8gfVxyXG4vL1xyXG4vLyAvLyDnm5HlkKxzd2l0Y2jkuovku7bnmbvlvZXms6jlhozpobXpnaLliIfmjaJcclxuLy8gQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4vLyAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbi8vICAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKVxyXG4vLyAgICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24oKXtcclxuLy8gICAgICAgICAvL+iOt+WPluW9k+WJjeS9jee9rlxyXG4vLyAgICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpXHJcbi8vICAgICAgICAgLy8g6L2s5o2i5Li65pW05pWwXHJcbi8vICAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdClcclxuLy8gICAgICAgICBpZihjdXJyZW50TGVmdCA8IDApe1xyXG4vLyAgICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6IFwiMFwifSlcclxuLy8gICAgICAgICB9ZWxzZXtcclxuLy8gICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIi00MDBweFwifSlcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KVxyXG4vL1xyXG4vLyB9XHJcbi8vXHJcbi8vIC8vIOebkeWQrOeZu+W9leaMiemSruS6i+S7tlxyXG4vLyBBdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uKCl7XHJcbi8vICAgICB2YXIgc2VsZiA9IHRoaXNcclxuLy8gICAgIC8vIOiOt+WPlueZu+W9leebkuWtkOS4i+eahOagh+etvlxyXG4vLyAgICAgdmFyIHNpZ25pbkdyb3VwID0gJChcIi5zaWduaW4tZ3JvdXBcIilcclxuLy8gICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKVxyXG4vLyAgICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKVxyXG4vLyAgICAgdmFyIHJlbWVtYmVySW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKVxyXG4vL1xyXG4vLyAgICAgLy8g54K55Ye755m75b2V5LqL5Lu277yM5o+Q5Y+W5pWw5o2uXHJcbi8vICAgICB2YXIgc3VibWl0QnRuID0gc2lnbmluR3JvdXAuZmluZChcIi5zdWJtaXQtYnRuXCIpXHJcbi8vICAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuLy8gICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKClcclxuLy8gICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpXHJcbi8vICAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuLy9cclxuLy8gICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4vLyAgICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L2xvZ2luLycsXHJcbi8vICAgICAgICAgICAgICdkYXRhJzoge1xyXG4vLyAgICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcclxuLy8gICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLFxyXG4vLyAgICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzogcmVtZW1iZXI/MTowXHJcbi8vICAgICAgICAgICAgIH0sXHJcbi8vICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuLy8gICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09IDIwMCl7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4vLyAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSByZXN1bHRbJ21lc3NhZ2UnXVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBtZXNzYWdlT2JqZWN0ID09ICdzdHJpbmcnIHx8IG1lc3NhZ2VPYmplY3QuY29uc3RydWN0b3IgPT0gU3RyaW5nKXtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWVzc2FnZU9iamVjdClcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlT2JqZWN0KVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAvL3tcIm1lYWFzYWdlXCI6W1wi5a+G56CB6ZW/5bqm5LiN6IO96LaF6L+HMjBcIiwgXCJ4eHh4XCJdfVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBtZXNzYWdlT2JqZWN0KXtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWVzc2FnZSlcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZSlcclxuLy9cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy9cclxuLy8gICAgICAgICAgICAgfSxcclxuLy8gICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbihlcnJvcil7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH0pXHJcbi8vICAgICB9KVxyXG4vLyB9XHJcbi8vXHJcbi8vIC8v6aG16Z2i5Yqg6L295a6M5q+V5LmL5ZCO6L+b6KGM5LqL5Lu2XHJcbi8vICQoZnVuY3Rpb24oKXtcclxuLy8gICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKVxyXG4vLyAgICAgYXV0aC5ydW4oKVxyXG4vLyB9KVxyXG4vL1xyXG4vL1xyXG4vL1xyXG5cclxuXHJcblxyXG4vLyDnlKjmnaXlpITnkIblr7zoiKrmnaHnmoRcclxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge31cclxuXHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQXV0aEJveEhvdmVyKCk7XHJcbiAgICBzZWxmLmhhbmRsZU5hdlN0YXR1cygpO1xyXG59O1xyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aEJveCA9ICQoXCIuYXV0aC1ib3hcIik7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5oaWRlKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUuaGFuZGxlTmF2U3RhdHVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gaHR0cDovLzEyNy4wLjAuMTo4MDAwL3BheWluZm8vXHJcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICB2YXIgcHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICB2YXIgaG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG4gICAgLy8gaHR0cDogKyAvLyArIDEyNy4wLjAuMTo4MDAwXHJcbiAgICB2YXIgZG9tYWluID0gcHJvdG9jb2wgKyAnLy8nICsgaG9zdDtcclxuICAgIHZhciBwYXRoID0gdXJsLnJlcGxhY2UoZG9tYWluLCcnKTtcclxuICAgIHZhciBuYXZMaXMgPSAkKFwiLm5hdiBsaVwiKTtcclxuICAgIG5hdkxpcy5lYWNoKGZ1bmN0aW9uIChpbmRleCxlbGVtZW50KSB7XHJcbiAgICAgICAgLy8ganMgPT4gJChqc+WvueixoSlcclxuICAgICAgICB2YXIgbGkgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBhVGFnID0gbGkuY2hpbGRyZW4oXCJhXCIpO1xyXG4gICAgICAgIHZhciBocmVmID0gYVRhZy5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICBpZihocmVmID09PSBwYXRoKXtcclxuICAgICAgICAgICAgbGkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5cclxuLy8g55So5p2l5aSE55CG55m75b2V5ZKM5rOo5YaM55qEXHJcbmZ1bmN0aW9uIEF1dGgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xyXG4gICAgc2VsZi5zY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ25pbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2lnbnVwRXZlbnQoKTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEnKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgIHZhciBjb3VudCA9IDEwO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKTtcclxuICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNtc0NhcHRjaGEudGV4dChjb3VudCsncycpO1xyXG4gICAgICAgIGNvdW50IC09IDE7XHJcbiAgICAgICAgaWYoY291bnQgPD0gMCl7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LDEwMDApO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5CdG4gPSAkKCcuc2lnbmluLWJ0bicpO1xyXG4gICAgdmFyIHNpZ251cEJ0biA9ICQoJy5zaWdudXAtYnRuJyk7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcblxyXG4gICAgc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOjB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjotNDAwfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKTtcclxuICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKFwibGVmdFwiKTtcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZihjdXJyZW50TGVmdCA8IDApe1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6JzAnfSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIi00MDBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgaW1nQ2FwdGNoYSA9ICQoJy5pbWctY2FwdGNoYScpO1xyXG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIitcIj9yYW5kb209XCIrTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNtc0NhcHRjaGEgPSAkKFwiLnNtcy1jYXB0Y2hhLWJ0blwiKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIGlmKCF0ZWxlcGhvbmUpe1xyXG4gICAgICAgICAgICBtZXNzYWdlQm94LnNob3dJbmZvKCfor7fovpPlhaXmiYvmnLrlj7fnoIHvvIEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3Ntc19jYXB0Y2hhLycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkdyb3VwID0gJCgnLnNpZ25pbi1ncm91cCcpO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3JlbWVtYmVyJ11cIik7XHJcblxyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6IHJlbWVtYmVyPzE6MFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ251cEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNpZ251cEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ251cEdyb3VwLmZpbmQoJy5zdWJtaXQtYnRuJyk7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcclxuICAgICAgICB2YXIgc21zQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XHJcblxyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOiBwYXNzd29yZDIsXHJcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XHJcbiAgICBhdXRoLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XHJcbiAgICBmcm9udEJhc2UucnVuKCk7XHJcbn0pO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZih3aW5kb3cudGVtcGxhdGUpe1xyXG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTsgLy8g5b6X5Yiw55qE5piv5q+r56eS55qEXHJcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7IC8v5b6X5Yiw55qE5piv5b2T5YmN5pe26Ze055qE5pe26Ze05oizXHJcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpLzEwMDA7IC8vIOmZpOS7pTEwMDDvvIzlvpfliLDnmoTmmK/np5JcclxuICAgICAgICAgICAgaWYodGltZXN0YW1wIDwgNjApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCkge1xyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XHJcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXJzKyflsI/ml7bliY0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrXCIgXCIraG91citcIjpcIittaW51dGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=
