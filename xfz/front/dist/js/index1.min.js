function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){console.log("sss"),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4MS5qcyJdLCJuYW1lcyI6WyJCYW5uZXIiLCJ0aGlzIiwiYmFubmVyV2lkdGgiLCJiYW5uZXJHcm91cCIsIiQiLCJpbmRleCIsImxlZnRBcnJvdyIsInJpZ2h0QXJyb3ciLCJiYW5uZXJVbCIsImxpTGlzdCIsImNoaWxkcmVuIiwiYmFubmVyQ291bnQiLCJsZW5ndGgiLCJwYWdlQ29udHJvbCIsIkluZGV4Iiwic2VsZiIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsImxvYWRCdG4iLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwiZmlyc3RCYW5uZXIiLCJlcSIsImNsb25lIiwibGFzdEJhbm5lciIsImFwcGVuZCIsInByZXBlbmQiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJpbml0UGFnZUNvbnRyb2wiLCJpIiwiY2lyY2xlIiwiYWRkQ2xhc3MiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwiYW5pbWF0ZSIsInN0b3AiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsaXN0ZW5BcnJvd0NsaWNrIiwiY2xpY2siLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImNvbnNvbGUiLCJsb2ciLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsInRlbXBsYXRlIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBc0JBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWMsSUFDbkJELEtBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxLQUFLSSxNQUFRLEVBQ2JKLEtBQUtLLFVBQVlGLEVBQUUsZUFDbkJI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bkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRSxFQUFNQyxTQUFTLFlBQVksQ0FBQ0YsT0FBU0EsSUFFckNNLEVBQWdCbEUsRUFBRSxxQkFDdEJrRSxFQUFjQyxRQUNkRCxFQUFjN0MsT0FBT3dDLEdBQ3JCbEQsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjQSxFQUNuQm1ELEVBQUduQyxTQUFTLFVBQVVPLFdBQVdDLFlBQVksVUFDN0MxQixFQUFLRyxRQUFRa0IsY0FPakN0QixNQUFNSyxVQUFVa0MsSUFBTSxXQUNQcEQsS0FDTnVELHNCQURNdkQsS0FFTmtFLDZCQUdUL0QsRUFBRSxZQUNlLElBQUlKLFFBQ1ZxRCxPQUVLLElBQUl2QyxPQUNWdUMiLCJmaWxlIjoiaW5kZXgxLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOmdouWQkeWvueixoVxyXG4vLyAxLiDmt7vliqDlsZ7mgKdcclxuLy8g6YCa6L+HdGhpc+WFs+mUruWtl++8jOe7keWumuWxnuaAp++8jOW5tuS4lOaMh+WumuS7lueahOWAvOOAglxyXG4vLyDljp/lnovpk75cclxuLy8gMi4g5re75Yqg5pa55rOVXHJcbi8vIOWcqEJhbm5lci5wcm90b3R5cGXkuIrnu5Hlrprmlrnms5XlsLHlj6/ku6XkuobjgIJcclxuXHJcbi8vIGZ1bmN0aW9uIEJhbm5lcigpIHtcclxuLy8gICAgIC8vIOi/meS4qumHjOmdouWGmeeahOS7o+eggVxyXG4vLyAgICAgLy8g55u45b2T5LqO5pivUHl0aG9u5Lit55qEX19pbml0X1/mlrnms5XnmoTku6PnoIFcclxuLy8gICAgIGNvbnNvbGUubG9nKCfmnoTpgKDlh73mlbAnKTtcclxuLy8gICAgIHRoaXMucGVyc29uID0gJ3poaWxpYW8nO1xyXG4vLyB9XHJcbi8vXHJcbi8vIEJhbm5lci5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbiAod29yZCkge1xyXG4vLyAgICAgY29uc29sZS5sb2coJ2hlbGxvICcsd29yZCk7XHJcbi8vIH07XHJcbi8vXHJcbi8vIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbi8vIGNvbnNvbGUubG9nKGJhbm5lci5wZXJzb24pO1xyXG4vLyBiYW5uZXIuZ3JlZXQoJ3poaWxpYW8nKTtcclxuXHJcbmZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMuYmFubmVyV2lkdGggPSA3OTg7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XHJcbiAgICB0aGlzLmluZGV4ID0gMTtcclxuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0LWFycm93XCIpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcclxuICAgIHRoaXMuYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGZpcnN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoc2VsZi5iYW5uZXJDb3VudC0xKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lcldpZHRoKihzZWxmLmJhbm5lckNvdW50KzIpLCdsZWZ0Jzotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IodmFyIGk9MDsgaTxzZWxmLmJhbm5lckNvdW50OyBpKyspe1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYoaSA9PT0gMCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYoaXNTaG93KXtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6LTc5OCpzZWxmLmluZGV4fSw1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmKGluZGV4ID09PSAwKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LDIwMDApO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKXtcclxuICAgICAgICAgICAgLy8gPT3vvJoxID09ICcxJ++8mnRydWVcclxuICAgICAgICAgICAgLy8gPT09PSAxICE9ICcxJ1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyQ291bnQqc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsOaYr++8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS6jOS4quWHveaVsOaYr++8jOaKium8oOagh+S7jmJhbm5lcuS4iuenu+i1sOS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIHNlbGYubG9vcCgpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlblBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwic3NzXCIpO1xyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xyXG4gICAgdGhpcy5sb29wKCk7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcclxuICAgIHRoaXMubGlzdGVuUGFnZUNvbnRyb2woKTtcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBJbmRleCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHNlbGYubG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3c2VzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aGlz77ya5Luj6KGo5b2T5YmN6YCJ5Lit55qE6L+Z5LiqbGnmoIfnrb5cclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVtcHR577ya5Y+v5Lul5bCG6L+Z5Liq5qCH562+5LiL55qE5omA5pyJ5a2Q5YWD57Sg6YO95Yig5o6JXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
